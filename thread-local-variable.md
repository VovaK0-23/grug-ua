### Thread-Local Variable

Використання thread-local змінних є більш простим підходом порівняно з управлінням одним спільним об'єктом у різних потоках.

**Thread-Local Variable** (змінна, локальна для потоку) — це спеціальний тип змінної, яка зберігає окреме значення для кожного потоку, що виконується в межах процесу. Це означає, що кожен потік має свою власну копію цієї змінної, і значення цієї змінної в одному потоці не впливає на значення в інших потоках.

#### Як це працює:

1. **Ініціалізація:** Кожен потік, який отримує доступ до thread-local змінної, отримує свою власну окрему копію цієї змінної.

2. **Доступ:** Зміни, внесені до thread-local змінної в одному потоці, не впливають на доступ до цієї змінної в іншому потоці.

3. **Використання:** Thread-local змінні часто використовуються для зберігання стану, специфічного для потоку, наприклад, ідентифікаторів сесій, кешування або проміжних результатів обчислень, які не повинні змішуватися між потоками.

#### Приклад у Ruby:

```ruby
# Встановлення thread-local змінної
Thread.current[:user_id] = 123

# Доступ до thread-local змінної
puts "User ID in main thread: #{Thread.current[:user_id]}"

# Створення нового потоку
thread = Thread.new do
  # У цьому потоці thread-local змінна незалежна
  Thread.current[:user_id] = 456
  puts "User ID in new thread: #{Thread.current[:user_id]}"
end

# Очікування завершення потоку
thread.join

# Перевірка значення thread-local змінної у головному потоці
puts "User ID in main thread after new thread: #{Thread.current[:user_id]}"
```

У цьому прикладі кожен потік отримає свою копію `threadLocal` змінної, і зміни, внесені в одному потоці, не впливатимуть на інший потік.

