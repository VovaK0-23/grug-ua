### Optimistic Concurrency

**Optimistic Concurrency** — це підхід до керування паралельним доступом до спільних ресурсів у базах даних або інших системах, який передбачає, що конфлікти між паралельними транзакціями або операціями виникають рідко. Замість того, щоб блокувати ресурс для кожної транзакції, система дозволяє кільком транзакціям працювати з ресурсом одночасно, і лише на етапі завершення транзакції перевіряє, чи не виникли конфлікти.

#### Як це працює:

1. **Читання:** Коли транзакція читає дані, вона не блокує їх і дозволяє іншим транзакціям також читати або змінювати ці дані.

2. **Оновлення:** Під час оновлення даних транзакція зберігає початковий стан або контрольну суму даних. Це дозволяє перевірити, чи не були змінені ці дані іншою транзакцією під час роботи поточної транзакції.

3. **Перевірка:** Перед завершенням транзакції (committing) система перевіряє, чи збігається початковий стан даних з поточним станом у базі. Якщо дані були змінені іншою транзакцією, поточна транзакція завершується з помилкою, і її можна повторити знову.

4. **Повторне виконання:** У разі конфлікту транзакція може бути повторно виконана, поки не буде успішно завершена без конфліктів.

#### Приклад:

Уявімо, що двоє користувачів одночасно редагують профіль у веб-застосунку. Кожен користувач змінює різні поля профілю, і застосунок дозволяє їм зберігати зміни без блокування.

- Користувач A завантажує сторінку профілю, вносить зміни та зберігає.
- Користувач B також завантажує сторінку профілю та зберігає зміни.
- Якщо застосунок використовує оптимістичну паралельність, то при збереженні змін кожен користувач спочатку перевіряє, чи змінилися дані з моменту останнього читання. Якщо ні, зміни зберігаються. Якщо змінилися, застосунок повідомляє користувача про конфлікт, і він може повторити свою операцію.

